I want to implement a “Force password change on first login” flow for the Mirae Connext app.

Goal:
- When a new employee (e.g. Diego) logs in with a temporary password, they should be forced to change their password before accessing the main app.
- After they successfully change their password once, they can log in normally and access the dashboard.

Please implement the feature with the following requirements.

-------------------------------------------------
1) USER MODEL – ADD FLAG
-------------------------------------------------

1. Extend the User model to include a boolean field:

   mustChangePassword: boolean

2. Default behavior:
   - Existing users (current seed accounts) can have mustChangePassword = false.
   - When an admin creates a new employee from the Employees module, set mustChangePassword = true for that user by default.
   - If an admin manually resets someone’s password to a temporary one (if such a feature exists later), also set mustChangePassword = true.

-------------------------------------------------
2) LOGIN RESPONSE – RETURN THE FLAG
-------------------------------------------------

Update the /api/auth/login endpoint so that on successful login it returns:

- token (JWT or current token format)
- user object with:
  - id
  - fullName
  - email
  - role
  - mustChangePassword

Example:

{
  "token": "...",
  "user": {
    "id": "user_123",
    "fullName": "Diego",
    "email": "diego@miraeconnext.com",
    "role": "admin",
    "mustChangePassword": true
  }
}

If credentials are invalid, keep returning 401 as before.

-------------------------------------------------
3) FRONTEND – REDIRECT TO CHANGE PASSWORD
-------------------------------------------------

Implement the following behavior on the frontend:

1. After a successful login:
   - Save token and basic user info (including mustChangePassword) in the existing auth state / context / localStorage.
   - If user.mustChangePassword === true:
     - Redirect the user to a new route: /change-password.
   - If user.mustChangePassword === false:
     - Redirect as currently done (to the main Dashboard).

2. Route protection:
   - Create a ProtectedRoute check that:
     - If no token: redirect to /login (current behavior).
     - If token exists BUT the user has mustChangePassword === true:
       - Allow access ONLY to /change-password and /logout.
       - Redirect any other route (dashboard, projects, experts, etc.) back to /change-password.

This ensures a user cannot access the main app until they have changed their password.

-------------------------------------------------
4) NEW PAGE – CHANGE PASSWORD SCREEN
-------------------------------------------------

Create a new page at /change-password with the following:

- Title: “Change Password”
- Subtitle: “For security, please update your password before accessing the platform.”
- Form fields:
  - Current password
  - New password
  - Confirm new password
- “Update Password” button

Form behavior:
- Validate that new password and confirm new password match.
- Optionally enforce a minimum strength (e.g. at least 8 characters, mix of letters and numbers).

On submit:
- Call a new endpoint: POST /api/auth/change-password.

If the change is successful:
- Update the stored user state so that mustChangePassword = false.
- Optionally re-login or refresh token if needed.
- Redirect the user to the main Dashboard.

If the change fails (wrong current password, etc.):
- Show a clear error message.

-------------------------------------------------
5) BACKEND – CHANGE PASSWORD ENDPOINT
-------------------------------------------------

Create a new endpoint:

POST /api/auth/change-password

Requirements:

- Protected by auth middleware:
  - Use the user id from the token (do NOT take userId from the body).
- Request body:
  - currentPassword
  - newPassword

Behavior:

1. Verify that currentPassword matches the existing password for the authenticated user.
2. If it does NOT match:
   - Return 400 or 401 with an appropriate error message.
3. If it matches:
   - Hash the newPassword.
   - Update the user’s passwordHash with this new value.
   - Set mustChangePassword = false for this user.
   - Return success (e.g. { success: true }).

Security notes:
- Do not return any password-related information in the response.
- Keep using the existing password hashing mechanism.

-------------------------------------------------
6) UI / UX DETAILS
-------------------------------------------------

- On the /change-password page:
  - Show the logged-in user’s email somewhere for clarity (e.g. “Logged in as diego@miraeconnext.com”).
  - Provide a “Log out” link/button that clears auth and returns to /login.

- If a user with mustChangePassword = true manually tries to access /login again:
  - After login, always push them back to /change-password until they complete the change.

-------------------------------------------------
7) DOCUMENTATION
-------------------------------------------------

After implementing, please:
- Document where and how mustChangePassword is stored in the User model.
- Explain the full flow for a new employee:
  - Admin creates employee (mustChangePassword = true).
  - Employee logs in with temporary password.
  - Employee is forced to go to /change-password.
  - After success, mustChangePassword becomes false and they can access the Dashboard.
